<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–§–æ—Ä–º–∞ –∑–∞–º–µ—Ä–∞ —Å—Ç–æ–ª–µ—à–Ω–∏—Ü—ã</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f4f7f9;
        padding: 20px;
    }
    .container {
        max-width: 800px;
        margin: auto;
        background: #fff;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    h1 {
        text-align: center;
        margin-bottom: 20px;
    }
    .form-group {
        margin-bottom: 20px;
    }
    label {
        font-weight: bold;
        display: block;
        margin-bottom: 5px;
    }
    input, textarea {
        width: 100%;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 6px;
        font-size: 16px;
        box-sizing: border-box;
    }
    input:focus, textarea:focus {
        border-color: #007bff;
        outline: none;
    }
    .error {
        border-color: red !important;
    }
    .error-message {
        color: red;
        font-size: 14px;
        margin-top: 5px;
    }
    button {
        width: 100%;
        padding: 15px;
        border: none;
        border-radius: 6px;
        font-size: 18px;
        font-weight: bold;
        cursor: pointer;
        color: #fff;
    }
    #copyBtn {
        background-color: #007bff;
    }
    #copyBtn.success {
        background-color: #28a745;
    }
    #clearBtn {
        margin-top: 10px;
        background-color: #dc3545;
    }
</style>
</head>
<body>

<div class="container">
    <h1>üìã –§–æ—Ä–º–∞ –∑–∞–º–µ—Ä–∞ —Å—Ç–æ–ª–µ—à–Ω–∏—Ü—ã</h1>

    <div class="form-group">
        <label for="agent">–ê–≥–µ–Ω—Ç *</label>
        <input type="text" id="agent" required>
        <div class="error-message" id="error-agent"></div>
    </div>
    <div class="form-group">
        <label for="client">–ö–ª–∏–µ–Ω—Ç *</label>
        <input type="text" id="client" required>
        <div class="error-message" id="error-client"></div>
    </div>
    <div class="form-group">
        <label for="draftsman">–ß–µ—Ä—Ç–µ–∂–Ω–∏–∫</label>
        <input type="text" id="draftsman">
    </div>
    <div class="form-group">
        <label for="measure_date">–î–∞—Ç–∞ *</label>
        <input type="date" id="measure_date" required>
        <div class="error-message" id="error-measure_date"></div>
    </div>

    <hr>

    <div class="form-group">
        <label for="position_number">–ü–æ–∑–∏—Ü–∏—è (–Ω–æ–º–µ—Ä) *</label>
        <input type="number" id="position_number" required>
        <div class="error-message" id="error-position_number"></div>
    </div>
    <div class="form-group">
        <label for="position_count">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∑–∏—Ü–∏–π *</label>
        <input type="number" id="position_count" required>
        <div class="error-message" id="error-position_count"></div>
    </div>
    <div class="form-group">
        <label for="color">–¶–≤–µ—Ç</label>
        <input type="text" id="color">
    </div>

    <hr>

    <div class="form-group">
        <label for="length">–î–ª–∏–Ω–∞ (–º–º) *</label>
        <input type="number" id="length" required>
        <div class="error-message" id="error-length"></div>
    </div>
    <div class="form-group">
        <label for="width">–®–∏—Ä–∏–Ω–∞ (–º–º) *</label>
        <input type="number" id="width" required>
        <div class="error-message" id="error-width"></div>
    </div>
    <div class="form-group">
        <label for="thickness">–¢–æ–ª—â–∏–Ω–∞ (–º–º)</label>
        <input type="number" id="thickness">
    </div>
    <div class="form-group">
        <label for="wall_panels">–°—Ç–µ–Ω–æ–≤—ã–µ –ø–∞–Ω–µ–ª–∏</label>
        <textarea id="wall_panels"></textarea>
    </div>
    <div class="form-group">
        <label for="tech_holes">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Ç–≤–µ—Ä—Å—Ç–∏—è</label>
        <textarea id="tech_holes"></textarea>
    </div>

    <button id="copyBtn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
    <button type="button" id="clearBtn">üóë –û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É</button>
</div>

<script>
    const copyButton = document.getElementById('copyBtn');
    const clearButton = document.getElementById('clearBtn');

    // –ê–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã
    document.getElementById('measure_date').valueAsDate = new Date();

    // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ LocalStorage
    document.querySelectorAll('input, textarea').forEach(field => {
        field.value = localStorage.getItem(field.id) || '';
        field.addEventListener('input', () => {
            localStorage.setItem(field.id, field.value);
            validateField(field); // –∂–∏–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
        });
        field.addEventListener('change', () => validateField(field)); // –¥–ª—è –¥–∞—Ç—ã/—á–∏—Å–µ–ª
    });

    function validateField(field) {
        const errorDiv = document.getElementById('error-' + field.id);
        if (field.hasAttribute('required') && !field.value.trim()) {
            field.classList.add('error');
            if (errorDiv) errorDiv.textContent = '–≠—Ç–æ –ø–æ–ª–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è';
            return false;
        } else {
            field.classList.remove('error');
            if (errorDiv) errorDiv.textContent = '';
            return true;
        }
    }

    function validateForm() {
        let isValid = true;
        document.querySelectorAll('input[required]').forEach(field => {
            if (!validateField(field)) isValid = false;
        });
        return isValid;
    }

    copyButton.addEventListener('click', () => {
        if (!validateForm()) {
            alert('–ò—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫–∏ –ø–µ—Ä–µ–¥ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º.');
            return;
        }

        const reportText = `
üìè –û–¢–ß–ï–¢ –ü–û –ó–ê–ú–ï–†–£

üßë‚Äçüíº –ê–≥–µ–Ω—Ç: ${agent.value}
üë§ –ö–ª–∏–µ–Ω—Ç: ${client.value}
üìê –ß–µ—Ä—Ç–µ–∂–Ω–∏–∫: ${draftsman.value || '‚Äî'}
üìÖ –î–∞—Ç–∞: ${measure_date.value}

üì¶ –ü–æ–∑–∏—Ü–∏—è ‚Ññ${position_number.value} –∏–∑ ${position_count.value}
üé® –¶–≤–µ—Ç: ${color.value || '‚Äî'}

üìè –†–∞–∑–º–µ—Ä—ã: ${length.value} √ó ${width.value} –º–º
üìè –¢–æ–ª—â–∏–Ω–∞: ${thickness.value || '‚Äî'} –º–º
ü™µ –°—Ç–µ–Ω–æ–≤—ã–µ –ø–∞–Ω–µ–ª–∏: ${wall_panels.value || '–ù–µ—Ç'}
üõ† –¢–µ—Ö. –æ—Ç–≤–µ—Ä—Å—Ç–∏—è: ${tech_holes.value || '–ù–µ—Ç'}
        `.trim();

        navigator.clipboard.writeText(reportText).then(() => {
            copyButton.textContent = '‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
            copyButton.classList.add('success');
            setTimeout(() => {
                copyButton.textContent = '–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ';
                copyButton.classList.remove('success');
            }, 2000);
        });
    });

    clearButton.addEventListener('click', () => {
        document.querySelectorAll('input, textarea').forEach(field => {
            field.value = '';
            field.classList.remove('error');
            localStorage.removeItem(field.id);
            const errorDiv = document.getElementById('error-' + field.id);
            if (errorDiv) errorDiv.textContent = '';
        });
        document.getElementById('measure_date').valueAsDate = new Date();
        clearButton.textContent = '‚úÖ –û—á–∏—â–µ–Ω–æ!';
        setTimeout(() => {
            clearButton.textContent = 'üóë –û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É';
        }, 2000);
    });
</script>

</body>
</html>

